<% if @requires != nil -%>
  <%- _requires = @requires -%>
<% elsif @allow_from != nil and ! @allow_from.empty? -%>
  <%- scope.function_warning(["Class #{@title}: Using Allow"]) -%>
  <%- scope.function_warning(["is deprecated in Apache #{@_apache_version}"]) -%>
  <%- _requires = 'ip ' + Array(@allow_from).join(" ") -%>
<% else -%>
  <%- _requires = @requires_defaults -%>
<% end -%>
<%-# -%>
<% if _requires.is_a?(String) -%>
  <%- if ! ['', 'unmanaged'].include?_requires.downcase -%>
    Require <%= _requires %>
  <%- end -%>
<% elsif _requires.is_a?(Array) -%>
  <%- _requires.each do |req| -%>
    Require <%= req %>
  <%- end -%>
<% elsif _requires.is_a?(Hash) -%>
  <%- if _requires.has_key?('requires') and _requires['requires'].is_a?(Array) -%>
    <%- _requires['requires'].each do |req| -%>
        Require <%= req %>
    <%- end -%>
  <%- else -%>
    <%- scope.function_warning(["Class #{@title}: Require hash must have"]) -%>
    <%- scope.function_warning(["a key named \"requires\" with array value"]) -%>
  <%- end -%>
<% end -%>
